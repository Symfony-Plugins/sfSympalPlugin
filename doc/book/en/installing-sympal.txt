# Installation

Installing Sympal is very easy. It is only a matter of downloading the plugin and 
running a task which prepares your existing Symfony application to run Sympal.

First we need to download the `sfSympalPlugin` and place it in our plugins 
directory. You can either download it via SVN or PEAR.

## SVN

To install from SVN you can run the following command to checkout the code in to
your plugins directory.

    $ svn co http://svn.symfony-project.com/plugins/sfSympalPlugin/trunk plugins/sfSympalPlugin

## PEAR

To install from PEAR you can run the following command to download the code in 
to your plugins directory.

    $ php symfony plugin:install sfSympalPlugin

## Enabling

Now that the plugin is downloaded and in our plugins directory we need to make a
few changes to our project so that it can run Sympal.

**1st**

Sympal requires some additional code in your ProjectConfiguration to be fully
enabled. So, even if you use `enableAllPluginsExcept` you still need to make
the following change.

    [php]
    public function setup()
    {
      require_once(sfConfig::get('sf_plugins_dir').'/sfSympalPlugin/config/sfSympalPluginConfiguration.class.php');
      sfSympalPluginConfiguration::enableSympalPlugins($this);

      $this->enableAllPluginsExcept(array('sfPropelPlugin', 'sfCompat10Plugin'));
    }

> **NOTE**
> Make sure the `enableSympalPlugins` line is above everything at the top of the 
> `setup` function and that you enabled `sfDoctrinePlugin` and disabled `sfPropelPlugin`.

Now that we have Sympal enabled you should be able to see all the tasks that 
Sympal provides by running the following command.

    $ symfony list sympal

You should see the following list:

    Available tasks for the "sympal" namespace:
      :delete-model      Delete all the related auto generated files for a given model name.
      :event-list        List of available events for a given url.
      :fix-perms         Fixes sympal directory permissions
      :install           Install the sympal plugin content management framework.
      :plugin-download   Download a sympal plugin to an existing sympal installation
      :plugin-generate   Generate the skeleton for a sympal plugin
      :plugin-install    Install a sympal plugin to an existing sympal installation
      :plugin-list       List/search through all the available sympal plugins.
      :plugin-uninstall  Uninstall a sympal plugin to an existing sympal installation

**2nd**

As for any plugin, after it is enabled you need to clear your cache publish any 
assets included. So run the following commands.

    $ php symfony cc
    $ php symfony plugin:publish-assets

**3rd**

At this point you must have at least one application in your Symfony project.
So, if you don't have any applications yet you should generate one now.

    [php]
    $ php symfony generate:app sympal

**4th**

Now we need to modify our `databases.yml` to use Doctrine instead of Propel.

    [yml]
    all:
      doctrine:
        class:        sfDoctrineDatabase
        param:
          dsn:        mysql:dbname=sympal;host=localhost
          username:   root
          password:

**5th**

The 2nd to last step is to change `apps/sympal/lib/myUser.class.php` to extend 
`sfSympalUser`.

    [php]
    class myUser extends sfSympalUser
    {
    }

**6th**

The last step is to fix any permissions problems by running the following fix-perms
task.

    $ php symfony sympal:fix-perms

Now you are ready to run the installation process. You can run this through the 
command line or from the web browser.

    $ php symfony sympal:install

> **TIP**
> You can optionally specify the `--interactive` option and it will ask you 
> questions for the installation default user. If you don't specify interactive then
> the installation will use the default information.

You can also optionally install from your browser. Open `http://localhost/sympal_dev.php` 
in your browser and it will show you the installation form.

Sympal should now installed and accessible. You can login with the username you 
created or use the default admin username and password.